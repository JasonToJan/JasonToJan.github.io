<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="iOS swift 3天30个swift项目之第三天, Android iOS Flutter">
    <meta name="baidu-site-verification" content="fmlEuI34ir" />
    <meta name="google-site-verification" content="yCy2azpds5XSuGZvis6OuA-XIGF5GuGpYRAaGfD6o48" />
    <meta name="360-site-verification" content="b7c11a830ef90fd1464ad6206bb7b6e7" />
    <meta name="description" content="1 滑动删除1.1 效果

1.2 列表实现class ViewController: UITableViewController &amp;#123;

数据定义：
var data = [
    pattern(image: &amp;quot;1&amp;">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>iOS swift 3天30个swift项目之第三天 | JasonToJan&#39;s Blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <style type="text/css">
        
    </style>

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
    <script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
    <script>
        var _hmt = _hmt || [];
        (function () {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ce84511d3df71640a9378a69f6293044";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    
        <script>
            (function(){
                var bp = document.createElement('script');
                var curProtocol = window.location.protocol.split(':')[0];
                if (curProtocol === 'https') {
                    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
                }
                else {
                    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
                }
                var s = document.getElementsByTagName("script")[0];
                s.parentNode.insertBefore(bp, s);
            })();
        </script>
    

    <script>
        (function(){
        var src = "https://jspassport.ssl.qhimg.com/11.0.1.js?d182b3f28525f2db83acfaaf6e696dba";
        document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>

<meta name="generator" content="Hexo 6.3.0"></head>

<body>

    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">JasonToJan's Blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/contact" class="waves-effect waves-light">
            
            <i class="fa fa-comments"></i>
            
            <span>留言板</span>
        </a>
    </li>
    
    <li>
        <a href="#searchModal" class="modal-trigger waves-effect waves-light">
            <i id="searchIcon" class="fa fa-search" title="搜索"></i>
        </a>
    </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">JasonToJan's Blog</div>
        <div class="logo-desc">
            
            专注移动端，热爱生活，热衷开发。
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        <li>
            <a href="/contact" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-comments"></i>
                
                留言板
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/JasonToJan/hexo-matery-modified" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/JasonToJan/hexo-matery-modified" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/2.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        iOS swift 3天30个swift项目之第三天
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 20px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                        <a href="/tags/30%E4%B8%AASwift%E9%A1%B9%E7%9B%AE/" target="_blank">
                            <span class="chip bg-color">30个Swift项目</span>
                        </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                        <a href="/categories/iOS/" class="post-category" target="_blank">
                            iOS
                        </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2023-02-05
                </div>

                <div class="post-author info-break-policy">
                    <i class="fa fa-user-o fa-fw"></i>作者:&nbsp;&nbsp;
                    
                    Jason
                    
                </div>

                
                
                <div class="info-break-policy">
                    <i class="fa fa-file-word-o fa-fw"></i>文章字数:&nbsp;&nbsp;
                    5.7k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="fa fa-clock-o fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    30 分
                </div>
                
                

                
                <div id="busuanzi_container_page_pv" class="info-break-policy">
                    <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                    <span id="busuanzi_value_page_pv"></span>
                </div>
                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="1-滑动删除"><a href="#1-滑动删除" class="headerlink" title="1 滑动删除"></a>1 滑动删除</h2><h3 id="1-1-效果"><a href="#1-1-效果" class="headerlink" title="1.1 效果"></a>1.1 效果</h3><img src=Swipeable%20Cell.gif>

<h3 id="1-2-列表实现"><a href="#1-2-列表实现" class="headerlink" title="1.2 列表实现"></a>1.2 列表实现</h3><pre><code class="line-numbers language-Swift">class ViewController: UITableViewController &#123;
</code></pre>
<p>数据定义：</p>
<pre><code class="line-numbers language-Swift">var data = [
    pattern(image: &quot;1&quot;, name: &quot;Pattern Building&quot;),
    pattern(image: &quot;2&quot;, name: &quot;Joe Beez&quot;),
    pattern(image: &quot;3&quot;, name: &quot;Car It&#39;s car&quot;),
    pattern(image: &quot;4&quot;, name: &quot;Floral Kaleidoscopic&quot;),
    pattern(image: &quot;5&quot;, name: &quot;Sprinkle Pattern&quot;),
    pattern(image: &quot;6&quot;, name: &quot;Palitos de queso&quot;),
    pattern(image: &quot;7&quot;, name: &quot;Ready to Go? Pattern&quot;),
    pattern(image: &quot;8&quot;, name: &quot;Sets Seamless&quot;),
]
</code></pre>
<p>数据绑定：</p>
<pre><code class="line-numbers language-Swift">override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123;
        return data.count
    &#125;
    
override func numberOfSections(in tableView: UITableView) -&gt; Int &#123;
    return 4
&#125;

override func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat &#123;
    return 60
&#125;

override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123;
    let cell = tableView.dequeueReusableCell(withIdentifier: &quot;PatternCell&quot;, for: indexPath) as! PatternCell
    let pattern = data[indexPath.row]
    
    cell.patternImageView.image = UIImage(named: pattern.image)
    cell.patternNameLabel.text = pattern.name
    return cell
&#125;

// 横滑 增加3个UITableViewRowAction 
override func tableView(_ tableView: UITableView, editActionsForRowAt indexPath: IndexPath) -&gt; [UITableViewRowAction]? &#123;
    let delete = UITableViewRowAction(style: .normal, title: &quot;🗑\nDelete&quot;) &#123; action, index in
        print(&quot;Delete button tapped&quot;)
    &#125;
    delete.backgroundColor = UIColor.gray
    
    // 分析点击事件
    let share = UITableViewRowAction(style: .normal, title: &quot;🤗\nShare&quot;) &#123; (action, indexPath) in
        let firstActivityItem = self.data[indexPath.row]
        let activityViewController = UIActivityViewController(activityItems: [firstActivityItem.image as NSString], applicationActivities: nil)
        
        self.present(activityViewController, animated: true, completion: nil)
    &#125;
    share.backgroundColor = UIColor.red
    
    let download = UITableViewRowAction(style: .normal, title: &quot;⬇️\nDownload&quot;) &#123; action, index in
        print(&quot;Download button tapped&quot;)
    &#125;
    download.backgroundColor = UIColor.blue
    
    return [download, share, delete]
&#125;

override func tableView(_ tableView: UITableView, canEditRowAt indexPath: IndexPath) -&gt; Bool &#123;
    return true
&#125;

override func tableView(_ tableView: UITableView, commit editingStyle: UITableViewCellEditingStyle, forRowAt indexPath: IndexPath) &#123;
    switch editingStyle &#123;
    case .delete:
        print(&quot;Delete&quot;)
    case .insert:
        print(&quot;Insert&quot;)
    case .none:
        print(&quot;None&quot;)
    &#125;
&#125;
</code></pre>
<p>cell是自定义的，但主要是通过故事版拖动的，代码绑定里面没有做其它事情。<br>其实这个横滑效果，是系统支持的，我们只需要多实现一些协议方法即可。</p>
<h2 id="2-3D触摸菜单"><a href="#2-3D触摸菜单" class="headerlink" title="2 3D触摸菜单"></a>2 3D触摸菜单</h2><h3 id="2-1-效果"><a href="#2-1-效果" class="headerlink" title="2.1 效果"></a>2.1 效果</h3><img src=3DTouchQuickAction.gif>

<h3 id="2-2-页面定义"><a href="#2-2-页面定义" class="headerlink" title="2.2 页面定义"></a>2.2 页面定义</h3><p>首页很简单，这里是在故事版里面绑定的控制器。<br>就中间一个Label。</p>
<p>然后还有2个页面，都是一张图片，在故事版里面定义了，没有在代码里面声明。</p>
<h3 id="2-3-配置3D菜单"><a href="#2-3-配置3D菜单" class="headerlink" title="2.3 配置3D菜单"></a>2.3 配置3D菜单</h3><p>先在info.plist中配置菜单，这里先不实现具体跳转：<br><img src=22.png></p>
<h3 id="2-4-AppDelegate配置"><a href="#2-4-AppDelegate配置" class="headerlink" title="2.4 AppDelegate配置"></a>2.4 AppDelegate配置</h3><pre><code class="line-numbers language-Swift">enum ShortcutIdentifier: String &#123;
    
    case First
    case Second
    case Third
    
    init?(fullType: String) &#123;
        guard let last = fullType.components(separatedBy: &quot;.&quot;).last else &#123;
            return nil
        &#125;
        self.init(rawValue: last)
    &#125;
    
    var type: String &#123;
        return Bundle.main.bundleIdentifier! + &quot;.\(self.rawValue)&quot;
    &#125;
&#125;
</code></pre>
<p>这里先定义一个枚举，注意到这里的type为Bundle.main.bundleIdentifier，这里应该必须要为这个了。</p>
<p>然后这里配置application协议：</p>
<pre><code class="line-numbers language-Swift">func application(_ application: UIApplication, performActionFor shortcutItem: UIApplicationShortcutItem, completionHandler: @escaping (Bool) -&gt; Void) &#123;
    let handledShortCutItem = handleShortCutItem(shortcutItem)
    // 走回调
    completionHandler(handledShortCutItem)
&#125;

func handleShortCutItem(_ shortcutItem: UIApplicationShortcutItem) -&gt; Bool &#123;
        
    var handled = false
    
    guard let _ = ShortcutIdentifier(fullType: shortcutItem.type) else &#123;
        return false
    &#125;
    
    guard let shortCutType = shortcutItem.type as String? else &#123;
        return false
    &#125;
    
    let storyboard = UIStoryboard(name: &quot;Main&quot;, bundle: nil)
    var vc: UIViewController
    
    switch (shortCutType) &#123;
    case ShortcutIdentifier.First.type:
        // Handle shortcut 1
        vc = storyboard.instantiateViewController(withIdentifier: &quot;RunVC&quot;) as! RunViewController
        handled = true
    case ShortcutIdentifier.Second.type:
        // Handle shortcut 2
        vc = storyboard.instantiateViewController(withIdentifier: &quot;ScanVC&quot;) as! ScanViewController
        handled = true
    case ShortcutIdentifier.Third.type:
        // Handle shortcut 3
        vc = storyboard.instantiateViewController(withIdentifier: &quot;WiFiVC&quot;) as! SwitchWiFiViewController
        handled = true
    default:
        vc = UIViewController()
        break
    &#125;
    
    // Display the selected view controller
    //
    var presentedVC: UIViewController = window!.rootViewController!
    while presentedVC.presentedViewController != nil &#123;
        presentedVC = presentedVC.presentedViewController!
    &#125;
    if !presentedVC.isMember(of: vc.classForCoder) &#123;
        presentedVC.present(vc, animated: true, completion: nil)
    &#125;
    
    return handled
&#125;
</code></pre>
<p>这里定义了快捷键方式跳转方式，这里通过获取到Main的故事版，然后，故事版去instantiateViewController来获取其它的控制器，这里再通过present方法跳转到目标控制器。</p>
<h2 id="3-侧滑菜单"><a href="#3-侧滑菜单" class="headerlink" title="3 侧滑菜单"></a>3 侧滑菜单</h2><h3 id="3-1-效果"><a href="#3-1-效果" class="headerlink" title="3.1 效果"></a>3.1 效果</h3><img src=SlideOutMenu.gif>

<h3 id="3-2-侧滑支持"><a href="#3-2-侧滑支持" class="headerlink" title="3.2 侧滑支持"></a>3.2 侧滑支持</h3><p>首先需要引入SWRevealViewController.h和SWRevealViewController.m文件。<br>这个用官方的即可，文件比较长，就不贴进来了。</p>
<h3 id="3-3-故事版定义"><a href="#3-3-故事版定义" class="headerlink" title="3.3 故事版定义"></a>3.3 故事版定义</h3><img src=23_1.png>
这里定义好了跳转逻辑，直接在故事版里面操作的。

<p>其它2个item也是如此。</p>
<p>主要是在Main.storyboard中定义了第一个控制为：SWRevealViewController<br>这个是oc写的。</p>
<p>故事版里面定义了这个控制器会指向一个BackTableVC。</p>
<h3 id="3-4-控制器配置"><a href="#3-4-控制器配置" class="headerlink" title="3.4 控制器配置"></a>3.4 控制器配置</h3><p>第一个菜单控制器为：</p>
<pre><code class="line-numbers language-Swift">class Channel : UIViewController &#123;
    
    override func viewDidLoad() &#123;
        self.navigationController?.isNavigationBarHidden = true
        self.view.addGestureRecognizer(self.revealViewController().panGestureRecognizer())
    &#125;
    
&#125;
</code></pre>
<p>第二个菜单控制器为：</p>
<pre><code class="line-numbers language-Swift">class ReadLater : UIViewController &#123;
    
    override func viewDidLoad() &#123;
        self.navigationController?.isNavigationBarHidden = true
        self.view.addGestureRecognizer(self.revealViewController().panGestureRecognizer())
    &#125;
    
&#125;
</code></pre>
<p>第三个菜单控制为：</p>
<pre><code class="line-numbers language-Swift">class FriendRead : UIViewController &#123;
    
    override func viewDidLoad() &#123;
        self.navigationController?.isNavigationBarHidden = true
        self.view.addGestureRecognizer(self.revealViewController().panGestureRecognizer())   
    &#125;   
&#125;
</code></pre>
<p>这里必须配置：</p>
<pre><code> self.view.addGestureRecognizer(self.revealViewController().panGestureRecognizer())   
</code></pre>
<p>才能实现菜单左滑手势效果哦。</p>
<h2 id="4-磁片效果"><a href="#4-磁片效果" class="headerlink" title="4 磁片效果"></a>4 磁片效果</h2><h3 id="4-1-效果"><a href="#4-1-效果" class="headerlink" title="4.1 效果"></a>4.1 效果</h3><img src=MosaicLayouts.gif>

<h3 id="4-2-pod引入三方库"><a href="#4-2-pod引入三方库" class="headerlink" title="4.2 pod引入三方库"></a>4.2 pod引入三方库</h3><p>这里通过Pod引入依赖，如下图：<br><img src=24_1.png></p>
<p>这里引入了FMMosaicLayout库+AFNetworking+ORStackView+SwiftyJSON<br>用了这四个库。</p>
<h3 id="4-3-页面定义"><a href="#4-3-页面定义" class="headerlink" title="4.3 页面定义"></a>4.3 页面定义</h3><p>这里也是用了一个UICollectionView，单一个页面。<br>直接继承了这个：UICollectionViewController。</p>
<pre><code class="line-numbers language-Swift">override func numberOfSections(in collectionView: UICollectionView) -&gt; Int &#123;
        return 10
    &#125;
    
override func collectionView(_ collectionView: UICollectionView, cellForItemAt indexPath: IndexPath) -&gt; UICollectionViewCell &#123;
    let cell = collectionView.dequeueReusableCell(withReuseIdentifier: &quot;Cell&quot;, for: indexPath)
    cell.alpha = 0
    
    let imageView = cell.contentView.viewWithTag(2) as! UIImageView
    imageView.image = UIImage(named: imageArray[indexPath.row])
    
    let cellDelay = UInt64((arc4random() % 600 ) / 1000 )
    let cellDelayTime = DispatchTime(uptimeNanoseconds: cellDelay * NSEC_PER_SEC)
    DispatchQueue.main.asyncAfter(deadline: cellDelayTime) &#123;
        UIView.animate(withDuration: 0.8, animations: &#123;
            cell.alpha = 1.0
        &#125;)
    &#125;
    
    return cell
&#125;


override func collectionView(_ collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int &#123;
    return imageArray.count
&#125;
</code></pre>
<p>主要实现了这几个协议方法。<br>Cell用了系统的。</p>
<p>内容直接用UIImageView表示。</p>
<p>然后这里异步开启动画效果，alpha从0到1的变化效果。</p>
<h3 id="4-4-初始化"><a href="#4-4-初始化" class="headerlink" title="4.4 初始化"></a>4.4 初始化</h3><pre><code class="line-numbers language-Swift">var imageArray = [String]()

override func viewDidLoad() &#123;
    super.viewDidLoad()
    imageArray = [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;, &quot;13&quot;, &quot;14&quot;, &quot;15&quot;, &quot;16&quot;, &quot;17&quot;, &quot;18&quot;, &quot;19&quot;, &quot;20&quot;, &quot;21&quot;]
    let mosaicLayout = FMMosaicLayout()
    self.collectionView?.collectionViewLayout = mosaicLayout
    if #available(iOS 11.0, *) &#123;
        self.collectionView?.contentInsetAdjustmentBehavior = .never
    &#125;
&#125;
</code></pre>
<p>这里初始化的时候，将collectionView的collectionViewLayout设置为三方库的View。</p>
<p>如何设置为不同大小，这里就是三方库的作用了：</p>
<pre><code class="line-numbers language-Swift">extension ViewController : FMMosaicLayoutDelegate &#123;

    func collectionView(_ collectionView: UICollectionView!, layout collectionViewLayout: FMMosaicLayout!, numberOfColumnsInSection section: Int) -&gt; Int &#123;
        return 3
    &#125;

    func collectionView(_ collectionView: UICollectionView!, layout collectionViewLayout: FMMosaicLayout!, mosaicCellSizeForItemAt indexPath: IndexPath!) -&gt; FMMosaicCellSize &#123;
        return indexPath.item % 7 == 0 ? .big : .small
    &#125;

    func collectionView(_ collectionView: UICollectionView!, layout collectionViewLayout: FMMosaicLayout!, interitemSpacingForSectionAt section: Int) -&gt; CGFloat &#123;
        return 1.0
    &#125;

    func collectionView(_ collectionView: UICollectionView!, layout collectionViewLayout: FMMosaicLayout!, insetForSectionAt section: Int) -&gt; UIEdgeInsets &#123;
        return UIEdgeInsets(top: 1.0, left: 1.0, bottom: 1.0, right: 1.0)
    &#125;
&#125;
</code></pre>
<p>这里如果是7的倍数就大图，否则小图。有3种类型。</p>
<h2 id="5-基础动画"><a href="#5-基础动画" class="headerlink" title="5 基础动画"></a>5 基础动画</h2><h3 id="5-1-效果"><a href="#5-1-效果" class="headerlink" title="5.1 效果"></a>5.1 效果</h3><img src=BasicAnimation.gif>

<h3 id="5-2-故事版"><a href="#5-2-故事版" class="headerlink" title="5.2 故事版"></a>5.2 故事版</h3><p>第一个启动页首先是Main.storyboard故事版，然后这个故事版有一个Storyboard Entry Point就是第一个场景了，这里第一个场景是空的NavigationController Scene。</p>
<p>然后这里绑定了这个第一个场景跳转逻辑，底部这里有个：<br><img src=25_1.png></p>
<p>那如何修改这个启动路径呢？<br><img src=25_2.png><br>这里最右侧属性里面，先清除掉之前的，然后拖动小圆点，指向目标场景即可哦。</p>
<p>这里Navigation Controller场景指向了BasicAnimation场景，这里面是一个TableView。<br>这里配置的UITableView的代理和数据源都指向了Basic Animation。<br><img src=25_3.png><br>这里数据直接在故事版里面写好了。</p>
<p>然后item的跳转也是直接在故事版里面拖动的：<br><img src=25_4.png></p>
<p>这里其实对应的首页的Controller没有啥东西：</p>
<pre><code class="line-numbers language-Swift">class ViewController: UITableViewController &#123;

    override func viewDidLoad() &#123;
        super.viewDidLoad()
        self.tableView.tableFooterView = UIView(frame: .zero)
    &#125;

    override func didReceiveMemoryWarning() &#123;
        super.didReceiveMemoryWarning()
    &#125;
&#125;
</code></pre>
<h3 id="5-3-Position动画"><a href="#5-3-Position动画" class="headerlink" title="5.3 Position动画"></a>5.3 Position动画</h3><p>这里定义了3个方块。</p>
<pre><code class="line-numbers language-Swift">class PositionViewController: UIViewController &#123;

    @IBOutlet weak var yellowSquareView: UIView!
    @IBOutlet weak var blueSquareView: UIView!
    @IBOutlet weak var mouseView: UIView!    
</code></pre>
<p>已经出现动画时执行动画：</p>
<pre><code class="line-numbers language-Swift">override func viewDidAppear(_ animated: Bool) &#123;
        super.viewDidAppear(animated)
        
    UIView.animate(withDuration: 0.8, delay: 0.2, usingSpringWithDamping: 0.6, initialSpringVelocity: 0.8, options: .curveEaseInOut, animations: &#123;
        self.yellowSquareView.center.x = self.view.bounds.width - self.yellowSquareView.center.x
        self.yellowSquareView.center.y = self.yellowSquareView.center.y + 30
        self.blueSquareView.center.x = self.view.bounds.width -  self.blueSquareView.center.x
        self.blueSquareView.center.y = self.blueSquareView.center.y + 30

        &#125;, completion: nil )
    
    UIView.animate(withDuration: 0.6, delay: 0.4, usingSpringWithDamping: 0.6, initialSpringVelocity: 0.8, options: .curveEaseOut, animations: &#123;
        self.setHeight(180)
        self.mouseView.center.y = self.view.bounds.height - self.mouseView.center.y
        &#125;, completion: nil )
&#125;

func setHeight(_ height: CGFloat) &#123;
    
    var frame: CGRect = self.mouseView.frame
    frame.size.height = height
    
    self.mouseView.frame = frame
&#125;
</code></pre>
<h3 id="5-4-Opacity动画"><a href="#5-4-Opacity动画" class="headerlink" title="5.4 Opacity动画"></a>5.4 Opacity动画</h3><pre><code class="line-numbers language-Swift">class OpacityViewController: UIViewController &#123;

    @IBOutlet weak var exampleImageView: UIImageView!
    
    override func viewDidLoad() &#123;
        super.viewDidLoad()

    &#125;

    override func didReceiveMemoryWarning() &#123;
        super.didReceiveMemoryWarning()
    &#125;
    
    override func viewDidAppear(_ animated: Bool) &#123;
        super.viewDidAppear(animated)
        
        UIView.animate(withDuration: 2) &#123;
            self.exampleImageView.alpha = 0
        &#125;
    &#125;
&#125;
</code></pre>
<p>这里控制图片alpha从1到0的动画。</p>
<h3 id="5-5-Scale动画"><a href="#5-5-Scale动画" class="headerlink" title="5.5 Scale动画"></a>5.5 Scale动画</h3><pre><code class="line-numbers language-Swift">class ScaleViewController: UIViewController &#123;

    @IBOutlet weak var scaleImageView: UIImageView!
    
    override func viewDidLoad() &#123;
        super.viewDidLoad()
        self.scaleImageView.alpha = 0
    &#125;

    override func didReceiveMemoryWarning() &#123;
        super.didReceiveMemoryWarning()
    &#125;
    
    override func viewDidAppear(_ animated: Bool) &#123;
        super.viewDidAppear(animated)
        
        
        UIView.animate(withDuration: 0.8, delay: 0, usingSpringWithDamping: 0.7, initialSpringVelocity: 1, options: .curveEaseIn, animations: &#123;
            self.scaleImageView.transform = CGAffineTransform(scaleX: 2, y: 2)
            self.scaleImageView.alpha = 1
            
            &#125;, completion: nil )
    &#125;
&#125;
</code></pre>
<p>这里alpha从0到1,缩放动画从1到2。</p>
<h3 id="5-6-Color动画"><a href="#5-6-Color动画" class="headerlink" title="5.6 Color动画"></a>5.6 Color动画</h3><pre><code class="line-numbers language-Swift">class ColorViewController: UIViewController &#123;

    @IBOutlet weak var bgColorView: UIView!
    @IBOutlet weak var numberLabel: UILabel!
    
    override func viewDidLoad() &#123;
        super.viewDidLoad()

    &#125;

    override func didReceiveMemoryWarning() &#123;
        super.didReceiveMemoryWarning()
    &#125;
    
    override func viewDidAppear(_ animated: Bool) &#123;
        super.viewDidAppear(animated)
        
        
        UIView.animate(withDuration: 0.5, delay: 0.2, options: .curveEaseIn, animations: &#123;
            self.bgColorView.backgroundColor = .black
            
            &#125;, completion: nil )
        
        UIView.animate(withDuration: 0.5, delay: 0.8, options: .curveEaseOut, animations: &#123;
            self.numberLabel.textColor = UIColor(red:0.959, green:0.937, blue:0.109, alpha:1)
            
            &#125;, completion: nil)
    &#125;
&#125;
</code></pre>
<p>这里设置颜色从黄到黑，文字颜色也变化了。</p>
<h3 id="5-7-Rotation动画"><a href="#5-7-Rotation动画" class="headerlink" title="5.7 Rotation动画"></a>5.7 Rotation动画</h3><pre><code class="line-numbers language-Swift">class RotationViewController: UIViewController &#123;

    @IBOutlet weak var emojiLabel: UILabel!
    @IBOutlet weak var rotationImageView: UIImageView!
    @IBOutlet weak var trump2: UIImageView!
    @IBOutlet weak var trump3: UIImageView!
    @IBOutlet weak var trump4: UIImageView!
    @IBOutlet weak var trump5: UIImageView!
    @IBOutlet weak var trump6: UIImageView!
    @IBOutlet weak var trump7: UIImageView!
    @IBOutlet weak var trump8: UIImageView!
    
    func spin() &#123;
        UIView.animate(withDuration: 0.8, delay: 0, options: .curveLinear, animations: &#123;
            self.rotationImageView.transform = self.rotationImageView.transform.rotated(by: CGFloat(Double.pi))
            self.trump2.transform = self.trump2.transform.rotated(by: CGFloat(Double.pi))
            self.trump3.transform = self.trump3.transform.rotated(by: CGFloat(Double.pi))
            self.trump4.transform = self.trump4.transform.rotated(by: CGFloat(Double.pi))
            self.trump5.transform = self.trump5.transform.rotated(by: CGFloat(Double.pi))
            self.trump6.transform = self.trump6.transform.rotated(by: CGFloat(Double.pi))
            self.trump7.transform = self.trump7.transform.rotated(by: CGFloat(Double.pi))
            self.trump8.transform = self.trump8.transform.rotated(by: CGFloat(Double.pi))
            self.emojiLabel.transform = self.emojiLabel.transform.rotated(by: CGFloat(Double.pi))
            &#125;) &#123; (finished) -&gt; Void in
                self.spin()
        &#125;
    &#125;
    
    override func viewDidAppear(_ animated: Bool) &#123;
        super.viewDidAppear(animated)
        self.spin()
    &#125;
&#125;
</code></pre>
<p>这里让8个视图都开始旋转了。</p>
<h2 id="6-CoreData使用"><a href="#6-CoreData使用" class="headerlink" title="6 CoreData使用"></a>6 CoreData使用</h2><h3 id="6-1-效果"><a href="#6-1-效果" class="headerlink" title="6.1 效果"></a>6.1 效果</h3><img src=CoreData.gif>

<h3 id="6-2-AddDelegate配置"><a href="#6-2-AddDelegate配置" class="headerlink" title="6.2 AddDelegate配置"></a>6.2 AddDelegate配置</h3><pre><code class="line-numbers language-Swift">lazy var applicationDocumentsDirectory: NSURL = &#123;
        // The directory the application uses to store the Core Data store file. This code uses a directory named &quot;me.appkitchen.cd&quot; in the application&#39;s documents Application Support directory.
        let urls = FileManager.default.urls(for: .documentDirectory, in: .userDomainMask)
        return urls[urls.count-1] as NSURL
    &#125;()

lazy var managedObjectModel: NSManagedObjectModel = &#123;
    // The managed object model for the application. This property is not optional. It is a fatal error for the application not to be able to find and load its model.
    let modelURL = Bundle.main.url(forResource: &quot;cd&quot;, withExtension: &quot;momd&quot;)!
    return NSManagedObjectModel(contentsOf: modelURL)!
&#125;()

lazy var persistentStoreCoordinator: NSPersistentStoreCoordinator = &#123;
    // The persistent store coordinator for the application. This implementation creates and returns a coordinator, having added the store for the application to it. This property is optional since there are legitimate error conditions that could cause the creation of the store to fail.
    // Create the coordinator and store
    let coordinator = NSPersistentStoreCoordinator(managedObjectModel: self.managedObjectModel)
    let url = self.applicationDocumentsDirectory.appendingPathComponent(&quot;SingleViewCoreData.sqlite&quot;)
    var failureReason = &quot;There was an error creating or loading the application&#39;s saved data.&quot;
    do &#123;
        try coordinator.addPersistentStore(ofType: NSSQLiteStoreType, configurationName: nil, at: url, options: nil)
    &#125; catch &#123;
        // Report any error we got.
        var dict = [String: AnyObject]()
        dict[NSLocalizedDescriptionKey] = &quot;Failed to initialize the application&#39;s saved data&quot; as AnyObject
        dict[NSLocalizedFailureReasonErrorKey] = failureReason as AnyObject

        dict[NSUnderlyingErrorKey] = error as NSError
        let wrappedError = NSError(domain: &quot;YOUR_ERROR_DOMAIN&quot;, code: 9999, userInfo: dict)
        // Replace this with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(&quot;Unresolved error \(wrappedError), \(wrappedError.userInfo)&quot;)
        abort()
    &#125;

    return coordinator
&#125;()

lazy var managedObjectContext: NSManagedObjectContext = &#123;
    // Returns the managed object context for the application (which is already bound to the persistent store coordinator for the application.) This property is optional since there are legitimate error conditions that could cause the creation of the context to fail.
    let coordinator = self.persistentStoreCoordinator
    var managedObjectContext = NSManagedObjectContext(concurrencyType: .mainQueueConcurrencyType)
    managedObjectContext.persistentStoreCoordinator = coordinator
    return managedObjectContext
&#125;()

// MARK: - Core Data Saving support

func saveContext () &#123;
    if managedObjectContext.hasChanges &#123;
        do &#123;
            try managedObjectContext.save()
        &#125; catch &#123;
            // Replace this implementation with code to handle the error appropriately.
            // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
            let nserror = error as NSError
            NSLog(&quot;Unresolved error \(nserror), \(nserror.userInfo)&quot;)
            abort()
        &#125;
    &#125;
&#125;
</code></pre>
<p>因为代码比较久了，这个按照XCode指示修复后就是这个效果。<br>这里可以运行了。</p>
<p>主要是applicationWillTerminate方法中saveContext了。</p>
<h3 id="6-3-可见数据操作"><a href="#6-3-可见数据操作" class="headerlink" title="6.3 可见数据操作"></a>6.3 可见数据操作</h3><p>这里代码使用还有点问题，暂时无法贴最新代码。<br>关于CoreData的使用还是建议参考这篇文章：<br><a target="_blank" rel="noopener" href="https://blog.ficowshen.com/page/post/52">了解和采用 CoreData 框架 —— Ficow 陪你学 CoreData</a>。</p>
<h2 id="7-底部Bar动画"><a href="#7-底部Bar动画" class="headerlink" title="7 底部Bar动画"></a>7 底部Bar动画</h2><h3 id="7-1-效果"><a href="#7-1-效果" class="headerlink" title="7.1 效果"></a>7.1 效果</h3><img src=TapBarAnimation.gif>

<h3 id="7-2-故事版添加导航item"><a href="#7-2-故事版添加导航item" class="headerlink" title="7.2 故事版添加导航item"></a>7.2 故事版添加导航item</h3><img src=27_1.png>

<p>这里应该是关联到了这3个item。<br>这样子，就可以展示底部导航栏效果。<br>然后item也定义了跳转的目标场景。</p>
<h3 id="7-3-第一个Tab页"><a href="#7-3-第一个Tab页" class="headerlink" title="7.3 第一个Tab页"></a>7.3 第一个Tab页</h3><pre><code class="line-numbers language-Swift">class FirstTabViewController: UIViewController, UITableViewDataSource, UITableViewDelegate &#123;

    @IBOutlet weak var articleTableView: UITableView!
    
    var data = [
    
        article(avatarImage: &quot;allen&quot;, sharedName: &quot;Allen Wang&quot;, actionType: &quot;Read Later&quot;, articleTitle: &quot;Giphy Cam Lets You Create And Share Homemade Gifs&quot;, articleCoverImage: &quot;giphy&quot;, articleSouce: &quot;TheNextWeb&quot;, articleTime: &quot;5min  •  13:20&quot;),
        article(avatarImage: &quot;Daniel Hooper&quot;, sharedName: &quot;Daniel Hooper&quot;, actionType: &quot;Shared on Twitter&quot;, articleTitle: &quot;Principle. The Sketch of Prototyping Tools&quot;, articleCoverImage: &quot;my workflow flow&quot;, articleSouce: &quot;SketchTalk&quot;, articleTime: &quot;3min  •  12:57&quot;),
        article(avatarImage: &quot;davidbeckham&quot;, sharedName: &quot;David Beckham&quot;, actionType: &quot;Shared on Facebook&quot;, articleTitle: &quot;Ohlala, An Uber For Escorts, Launches Its ‘Paid Dating’ Service In NYC&quot;, articleCoverImage: &quot;Ohlala&quot;, articleSouce: &quot;TechCrunch&quot;, articleTime: &quot;1min  •  12:59&quot;),
        article(avatarImage: &quot;bruce&quot;, sharedName: &quot;Bruce Fan&quot;, actionType: &quot;Shared on Weibo&quot;, articleTitle: &quot;Lonely Planet’s new mobile app helps you explore major cities like a pro&quot;, articleCoverImage: &quot;Lonely Planet&quot;, articleSouce: &quot;36Kr&quot;, articleTime: &quot;5min  •  11:21&quot;),

    ]
</code></pre>
<p>上面是数据定义。</p>
<p>然后设置代理和数据源：</p>
<pre><code class="line-numbers language-Swift">override func viewDidLoad() &#123;
    super.viewDidLoad()
    
    articleTableView.dataSource = self
    articleTableView.delegate = self
    articleTableView.separatorStyle = UITableViewCell.SeparatorStyle.none
    articleTableView.tableFooterView = UIView(frame: .zero)
&#125;

 
func numberOfSectionsInTableView(tableView: UITableView) -&gt; Int &#123;
    return 10
&#125;

func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123;
    return data.count
&#125;

func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat &#123;
    return 165
&#125;

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123;
    let cell = articleTableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! ArticleTableViewCell
    let article = data[indexPath.row]
    
    cell.avatarImage.image = UIImage(named: article.avatarImage)
    cell.articleCoverImage.image = UIImage(named: article.articleCoverImage)
    cell.sharedNameLabel.text = article.sharedName
    cell.actionTypeLabel.text = article.actionType
    cell.articleTitleLabel.text = article.articleTitle
    cell.articleSouceLabel.text = article.articleSouce
    cell.articelCreatedAtLabel.text = article.articleTime
    cell.selectionStyle = UITableViewCell.SelectionStyle.none
    
    return cell   
&#125;
</code></pre>
<p>这里配置了Cell:</p>
<pre><code class="line-numbers language-Swift">struct article &#123;
    let avatarImage: String
    let sharedName: String
    let actionType: String
    let articleTitle: String
    let articleCoverImage: String
    let articleSouce: String
    let articleTime: String
&#125;

class ArticleTableViewCell: UITableViewCell &#123;

    @IBOutlet weak var avatarImage: UIImageView!
    @IBOutlet weak var sharedNameLabel: UILabel!
    @IBOutlet weak var actionTypeLabel: UILabel!
    @IBOutlet weak var articleCoverImage: UIImageView!
    
    @IBOutlet weak var articleTitleLabel: UILabel!
    @IBOutlet weak var articleSouceLabel: UILabel!
    @IBOutlet weak var articelCreatedAtLabel: UILabel!
    
    override func awakeFromNib() &#123;
        super.awakeFromNib()
        // Initialization code

    &#125;

    override func setSelected(_ selected: Bool, animated: Bool) &#123;
        super.setSelected(selected, animated: animated)

        // Configure the view for the selected state
    &#125;
&#125;
</code></pre>
<p>这里应该就是item配置了，具体布局是用故事版里面的配置的。</p>
<p>可见的时候，执行动画效果：</p>
<pre><code class="line-numbers language-Swift">override func viewWillAppear(_ animated: Bool) &#123;   
    animateTable()
&#125;

func animateTable() &#123;
    
    self.articleTableView.reloadData()
    
    let cells = articleTableView.visibleCells
    let tableHeight: CGFloat = articleTableView.bounds.size.height
    
    for i in cells &#123;
        let cell: UITableViewCell = i as UITableViewCell
        cell.transform = CGAffineTransform(translationX: 0, y: tableHeight)
    &#125;
    
    var index = 0
    
    for a in cells &#123;
        let cell: UITableViewCell = a as UITableViewCell
        UIView.animate(withDuration: 1.0, delay: 0.05 * Double(index), usingSpringWithDamping: 0.8, initialSpringVelocity: 0, options: [], animations: &#123;
            cell.transform = CGAffineTransform(translationX: 0, y: 0);
            &#125;, completion: nil)
        
        index += 1
    &#125;
&#125;
</code></pre>
<p>从下往上的动画效果。</p>
<h3 id="7-4-第二个Tab的动画"><a href="#7-4-第二个Tab的动画" class="headerlink" title="7.4 第二个Tab的动画"></a>7.4 第二个Tab的动画</h3><pre><code class="line-numbers language-Swift">override func viewDidAppear(_ animated: Bool) &#123;
    super.viewDidAppear(animated)
    
    UIView.animate(withDuration: 0.5, delay: 0.1, usingSpringWithDamping: 0.7, initialSpringVelocity: 1, options: .curveEaseIn, animations: &#123;
        self.exploreImageView.transform = CGAffineTransform(scaleX: 1, y: 1)
        self.exploreImageView.alpha = 1
        
        &#125;, completion: nil )
&#125;

override func viewDidDisappear(_ animated: Bool) &#123;
    super.viewDidDisappear(animated)
    resetViewTransform()
&#125;

// MARK:
func resetViewTransform() &#123;
    self.exploreImageView.alpha = 0
    self.exploreImageView.transform = CGAffineTransform(scaleX: 0.5, y: 0.5)
&#125;
</code></pre>
<h3 id="7-5-第三个Tab的动画"><a href="#7-5-第三个Tab的动画" class="headerlink" title="7.5 第三个Tab的动画"></a>7.5 第三个Tab的动画</h3><pre><code class="line-numbers language-Swift">override func viewDidAppear(_ animated: Bool) &#123;
        super.viewDidAppear(animated)
    
    UIView.animate(withDuration: 0.5, delay: 0.1, usingSpringWithDamping: 0.7, initialSpringVelocity: 1, options: .curveEaseIn, animations: &#123;
        self.profileImageView.transform = CGAffineTransform(scaleX: 1, y: 1)
        self.profileImageView.alpha = 1
        
        &#125;, completion: nil )
&#125;

override func viewDidDisappear(_ animated: Bool) &#123;
    super.viewDidDisappear(animated)
    resetViewTransform()
&#125;

// MARK:
func resetViewTransform() &#123;
    self.profileImageView.alpha = 0
    self.profileImageView.transform = CGAffineTransform(scaleX: 0.5, y: 0.5)
&#125;
</code></pre>
<h2 id="8-系统搜索"><a href="#8-系统搜索" class="headerlink" title="8 系统搜索"></a>8 系统搜索</h2><h3 id="8-1-效果"><a href="#8-1-效果" class="headerlink" title="8.1 效果"></a>8.1 效果</h3><img src=Spotlight%20Search.gif>

<h3 id="8-2-首页"><a href="#8-2-首页" class="headerlink" title="8.2 首页"></a>8.2 首页</h3><p>数据设置：<br><img src=28_1.png><br>这里新建了一个电影数据，用key-value形式保存了。</p>
<p>可见时处理：</p>
<pre><code class="line-numbers language-Swift">override func viewDidLoad() &#123;
    super.viewDidLoad()
    loadMoviesInfo()
    configureTableView()
    navigationItem.title = &quot;Movies&quot;
    setupSearchableContent()
&#125;

// 加载根目录文件数据，拿到数组
func loadMoviesInfo() &#123;
    if let path = Bundle.main.path(forResource: &quot;MoviesData&quot;, ofType: &quot;plist&quot;) &#123;
        moviesInfo = NSMutableArray(contentsOfFile: path)
    &#125;
&#125;

// 配置代理和数据源
func configureTableView() &#123;
    tblMovies.delegate = self
    tblMovies.dataSource = self
    tblMovies.tableFooterView = UIView(frame: CGRect.zero)
    tblMovies.register(UINib(nibName: &quot;MovieSummaryCell&quot;, bundle: nil), forCellReuseIdentifier: &quot;idCellMovieSummary&quot;)
&#125;

// 搜索数据装载，使用了系统的类  CSSearchableItem
func setupSearchableContent() &#123;
    var searchableItems = [CSSearchableItem]()
    
    for i in 0...(moviesInfo.count - 1) &#123;
        
        let movie = moviesInfo[i] as! [String: String]
        let searchableItemAttributeSet = CSSearchableItemAttributeSet(itemContentType: kUTTypeText as String)
        
        //set the title
        searchableItemAttributeSet.title = movie[&quot;Title&quot;]!
        
        //set the image
        let imagePathParts = movie[&quot;Image&quot;]!.components(separatedBy: &quot;.&quot;)
        searchableItemAttributeSet.thumbnailURL = Bundle.main.url(forResource: imagePathParts[0], withExtension: imagePathParts[1])
        
        // Set the description.
        searchableItemAttributeSet.contentDescription = movie[&quot;Description&quot;]!
        
        var keywords = [String]()
        let movieCategories = movie[&quot;Category&quot;]!.components(separatedBy: &quot;, &quot;)
        for movieCategory in movieCategories &#123;
            keywords.append(movieCategory)
        &#125;
        
        let stars = movie[&quot;Stars&quot;]!.components(separatedBy: &quot;, &quot;)
        for star in stars &#123;
            keywords.append(star)
        &#125;
        
        searchableItemAttributeSet.keywords = keywords
        
        let searchableItem = CSSearchableItem(uniqueIdentifier: &quot;com.appcoda.SpotIt.\(i)&quot;, domainIdentifier: &quot;movies&quot;, attributeSet: searchableItemAttributeSet)
        
        searchableItems.append(searchableItem)
        
        CSSearchableIndex.default().indexSearchableItems(searchableItems) &#123;
            if $0 != nil &#123;
                print($0!.localizedDescription)
            &#125;
        &#125;
    &#125;
&#125;
</code></pre>
<p>监听系统搜索后跳转逻辑：</p>
<pre><code class="line-numbers language-Swift">override func restoreUserActivityState(_ activity: NSUserActivity) &#123;
    if activity.activityType == CSSearchableItemActionType &#123;
        if let userInfo = activity.userInfo &#123;
            let selectedMovie = userInfo[CSSearchableItemActivityIdentifier] as! String
            selectedMovieIndex = Int(selectedMovie.components(separatedBy: &quot;.&quot;).last!)
            performSegue(withIdentifier: &quot;idSegueShowMovieDetails&quot;, sender: self)
        &#125;
    &#125;
&#125;
</code></pre>
<p>然后是代理和数据源配置：</p>
<pre><code class="line-numbers language-Swift"> func numberOfSections(in tableView: UITableView) -&gt; Int &#123;
        return 1
    &#125;
    
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int &#123;
    if moviesInfo != nil &#123;
        return moviesInfo.count
    &#125;
    return 0
&#125;

func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell &#123;
    let cell = tableView.dequeueReusableCell(withIdentifier: &quot;idCellMovieSummary&quot;, for: indexPath) as! MovieSummaryCell
    let currentMovieInfo = moviesInfo[(indexPath as NSIndexPath).row] as! [String: String]
    
    cell.lblTitle.text = currentMovieInfo[&quot;Title&quot;]!
    cell.lblDescription.text = currentMovieInfo[&quot;Description&quot;]!
    cell.lblRating.text = currentMovieInfo[&quot;Rating&quot;]!
    cell.imgMovieImage.image = UIImage(named: currentMovieInfo[&quot;Image&quot;]!)
    
    return cell
&#125;

func tableView(_ tableView: UITableView, heightForRowAt indexPath: IndexPath) -&gt; CGFloat &#123;
    return 100.0
&#125;

func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) &#123;
    selectedMovieIndex = (indexPath as NSIndexPath).row
    performSegue(withIdentifier: &quot;idSegueShowMovieDetails&quot;, sender: self)
&#125;

override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123;
    if let identifier = segue.identifier, identifier == &quot;idSegueShowMovieDetails&quot; &#123;
        let movieDetailsViewController = segue.destination as! MovieDetailsViewController
        movieDetailsViewController.movieInfo = moviesInfo[selectedMovieIndex] as? [String: String]
    &#125;
&#125;
</code></pre>
<p>这里didSelectRowAt，通过调用系统的performSegue决定跳转到某个场景。</p>
<h3 id="8-3-详情页"><a href="#8-3-详情页" class="headerlink" title="8.3 详情页"></a>8.3 详情页</h3><pre><code class="line-numbers language-Swift">class MovieDetailsViewController: UIViewController &#123;

    @IBOutlet weak var imgMovieImage: UIImageView!
    @IBOutlet weak var lblTitle: UILabel!
    @IBOutlet weak var lblCategory: UILabel!
    @IBOutlet weak var lblDescription: UILabel!
    @IBOutlet weak var lblDirector: UILabel!
    @IBOutlet weak var lblStars: UILabel!
    @IBOutlet weak var lblRating: UILabel!
    
    var movieInfo: [String: String]!
    
    override func viewDidLoad() &#123;
        super.viewDidLoad()
    &#125;
    
    override func viewWillAppear(_ animated: Bool) &#123;
        super.viewWillAppear(animated)
        
        lblRating.layer.cornerRadius = lblRating.frame.size.width/2
        lblRating.layer.masksToBounds = true
        
        if movieInfo != nil &#123;
            populateMovieInfo()
        &#125;
    &#125;
    
    
    override func didReceiveMemoryWarning() &#123;
        super.didReceiveMemoryWarning()
    &#125;
    
    func populateMovieInfo() &#123;
        
        lblTitle.text = movieInfo[&quot;Title&quot;]!
        lblCategory.text = movieInfo[&quot;Category&quot;]!
        lblDescription.text = movieInfo[&quot;Description&quot;]!
        lblDirector.text = movieInfo[&quot;Director&quot;]!
        lblStars.text = movieInfo[&quot;Stars&quot;]!
        lblRating.text = movieInfo[&quot;Rating&quot;]!
        imgMovieImage.image = UIImage(named: movieInfo[&quot;Image&quot;]!)
        
    &#125;
&#125;
</code></pre>
<p>这里配置了movieInfo，外部设置进来，然后回显进去。</p>
<h2 id="9-选择头像"><a href="#9-选择头像" class="headerlink" title="9 选择头像"></a>9 选择头像</h2><h3 id="9-1-效果"><a href="#9-1-效果" class="headerlink" title="9.1 效果"></a>9.1 效果</h3><img src=AvatarPicker.gif>

<h3 id="9-2-点击头像"><a href="#9-2-点击头像" class="headerlink" title="9.2 点击头像"></a>9.2 点击头像</h3><pre><code class="line-numbers language-Swift">@IBAction func pickProfileImage(_ tap: UITapGestureRecognizer) &#123;
    let authorization = PHPhotoLibrary.authorizationStatus()
    
    if authorization == .notDetermined &#123;
        PHPhotoLibrary.requestAuthorization &#123; _ in
            DispatchQueue.main.async &#123;
                self.pickProfileImage(tap)
            &#125;
        &#125;
    &#125;
    
    if authorization == .authorized &#123;
        let controller = ImagePickerSheetController()
        controller.addAction(action: ImageAction(title: NSLocalizedString(&quot;Take Photo or Video&quot;, comment: &quot;Action Title&quot;), secondaryTitle: NSLocalizedString(&quot;Use this one&quot;, comment: &quot;Action Title&quot;), handler: &#123; _ in
            self.presentCamera()
        &#125;, secondaryHandler: &#123; (action, numberOfPhotos) in
            controller.getSelectedImagesWithCompletion(completion: &#123; images in
                self.profileImage = images[0]
                self.userProfileImageView.image = self.profileImage
            &#125;)
        &#125;))
                    
        controller.addAction(action: ImageAction(title: NSLocalizedString(&quot;Cancel&quot;, comment: &quot;Action Title&quot;), style: .Cancel, handler: nil, secondaryHandler: nil))
        
        self.present(controller, animated: true, completion: nil)
    &#125;
    
    
&#125;

func presentCamera()
&#123;
    print(&quot;拍照&quot;)
&#125;
</code></pre>
<p>这里先判断有无权限，没有权限继续执行，有权限再跳转控制器。</p>
<h2 id="10-wiki-Face"><a href="#10-wiki-Face" class="headerlink" title="10 wiki-Face"></a>10 wiki-Face</h2><h3 id="10-1-效果"><a href="#10-1-效果" class="headerlink" title="10.1 效果"></a>10.1 效果</h3><img src=wikiFace.gif>

<h3 id="10-2-搜索处理"><a href="#10-2-搜索处理" class="headerlink" title="10.2 搜索处理"></a>10.2 搜索处理</h3><pre><code class="line-numbers language-Swift">func textFieldShouldReturn(_ textField: UITextField) -&gt; Bool &#123;
        
    textField.resignFirstResponder()
    
    if let textFieldContent = textField.text &#123;
        do &#123;
            try WikiFace.faceForPerson(textFieldContent, size: CGSize(width: 300, height: 400), completion: &#123; (image:UIImage?, imageFound:Bool) -&gt; () in
                if imageFound == true &#123;
                    DispatchQueue.main.async &#123;
                        self.faceImageView.image = image
                        
                        UIView.animate(withDuration: 0.8, delay: 0, usingSpringWithDamping: 0.7, initialSpringVelocity: 1, options: .curveEaseIn, animations: &#123; () -&gt; Void in
                            
                            self.faceImageView.transform = CGAffineTransform(scaleX: 1, y: 1)
                            self.faceImageView.alpha = 1
                            
                            //Fuck! Useless...LOL
                            self.faceImageView.layer.shadowOpacity = 0.4
                            self.faceImageView.layer.shadowOffset = CGSize(width: 3.0, height: 2.0)
                            self.faceImageView.layer.shadowRadius = 15.0
                            self.faceImageView.layer.shadowColor = UIColor.black.cgColor
                            
                        &#125;, completion: nil )
                        
                        WikiFace.centerImageViewOnFace(self.faceImageView)
                    &#125;
                &#125;

            &#125;)
        &#125;catch WikiFace.WikiFaceError.CouldNotDownloadImage&#123;
            print(&quot;Could not access wikipedia for downloading an image&quot;)
        &#125; catch &#123;
            print(error)
        &#125;
    &#125;
    
    return true
    
&#125;
</code></pre>
<p>使用工具类：</p>
<pre><code class="line-numbers language-Swift">import UIKit
import ImageIO

class WikiFace: NSObject &#123;
    
    enum WikiFaceError: Error &#123;
        case CouldNotDownloadImage
    &#125;
    
    class func faceForPerson(_ person: String, size: CGSize, completion:@escaping (_ image: UIImage? ,_ imageFound: Bool) -&gt; ()) throws &#123;
        
        let escapedString = person.addingPercentEncoding(withAllowedCharacters: CharacterSet.urlHostAllowed)
        let pixelsForAPIRequest = Int(max(size.width, size.height)) * 2
        
        let url = URL(string: &quot;https://en.wikipedia.org/w/api.php?action=query&amp;titles=\(escapedString!)&amp;prop=pageimages&amp;format=json&amp;pithumbsize=\(pixelsForAPIRequest)&quot;)
        
        let task: URLSessionTask = URLSession.shared.dataTask(with: url!, completionHandler: &#123;
            (data: Data?, response: URLResponse?, error: Error?) in
            if error == nil &#123;
                let wikiDict = try! JSONSerialization.jsonObject(with: data!, options: JSONSerialization.ReadingOptions.allowFragments) as! NSDictionary
        
                if let query = wikiDict.object(forKey: &quot;query&quot;) as? NSDictionary &#123;
                    if let pages = query.object(forKey: &quot;pages&quot;) as? NSDictionary &#123;
                        if let pageContent = pages.allValues.first as? NSDictionary &#123;
                            if let thumbnail = pageContent.object(forKey: &quot;thumbnail&quot;) as? NSDictionary &#123;
                                if let thumbURL = thumbnail.object(forKey: &quot;source&quot;) as? String &#123;
                                    let faceImage = UIImage(data: try! Data(contentsOf: URL(string: thumbURL)!))
                                    completion(faceImage, true)
                                &#125;
                            &#125;else&#123;
                                completion(nil, false)
                            &#125;
                        &#125;
                    &#125;
                &#125;
            &#125;
        &#125;)
        task.resume()
    &#125;
    
    class func centerImageViewOnFace (_ imageView: UIImageView) &#123;
        
        let context = CIContext(options: nil)
        let options = [CIDetectorAccuracy:CIDetectorAccuracyHigh]
        let detector = CIDetector(ofType: CIDetectorTypeFace, context: context, options: options)
        
        let faceImage = imageView.image
        let ciImage = CIImage(cgImage: faceImage!.cgImage!)
        
        let features = detector?.features(in: ciImage)
        
        if (features?.count)! &gt; 0 &#123;
            
            var face:CIFaceFeature!
            
            for rect in features! &#123;
                face = rect as? CIFaceFeature
            &#125;
            
            var faceRectWithExtendedBounds = face.bounds
            faceRectWithExtendedBounds.origin.x -= 20
            faceRectWithExtendedBounds.origin.y -= 30
            
            faceRectWithExtendedBounds.size.width += 40
            faceRectWithExtendedBounds.size.height += 60
            
            let x = faceRectWithExtendedBounds.origin.x / faceImage!.size.width
            let y = (faceImage!.size.height - faceRectWithExtendedBounds.origin.y - faceRectWithExtendedBounds.size.height) / faceImage!.size.height
            
            let widthFace = faceRectWithExtendedBounds.size.width / faceImage!.size.width
            let heightFace = faceRectWithExtendedBounds.size.height  / faceImage!.size.height
            
            imageView.layer.contentsRect = CGRect(x: x, y: y, width: widthFace, height: heightFace)
        &#125;
    &#125;
&#125;
</code></pre>
<p>这里应该是走异步接口，然后将网络图片设置给UIImageVIew了。</p>
<h2 id="11-总结"><a href="#11-总结" class="headerlink" title="11 总结"></a>11 总结</h2><ul>
<li><p>滑动删除效果其实是UITableView里面自带的一个方法editActionsForRowAt方法，里面配置的UITableViewRowAction实现的。</p>
</li>
<li><p>3D触摸效果，首先需要在info.plist中配置菜单，然后在AppDelegate中定义菜单的跳转逻辑，可以present方式跳转到目标页面。</p>
</li>
<li><p>侧滑菜单，这个需要引入一下SWRevealViewController，这个是oc写的，这里面配置一下菜单控制器，这样就可以实现侧滑效果，主要工作量在SWRevealViewController里面。</p>
</li>
<li><p>磁片效果，这个主要是引入了一个三方库，FMMosaicLayout库，需要实现一下FMMosaicLayoutDelegate这个方法，这样就可以实现不同item的大小。</p>
</li>
<li><p>基础动画，这里定义了各种各样的基础动画使用方法，Position动画就是height高度区别，Opacity效果是配置alpah，Scale效果是CGAffineTransform这个配置，Color动画就改变一下颜色值，Rotation动画就是设置transform的rotated方法。</p>
</li>
<li><p>CoreData的使用主要是现在appDelegate中设置saveContext，其它操作类似操作数据库。</p>
</li>
<li><p>底部Bar动画，主要是在可见的时候，对每个UITableViewCell里面做了一个动画效果，里面通过设置CGAffineTransform这个实现。</p>
</li>
<li><p>系统搜索，这个首先需要配置一个数据源，可以再plist文件里面写一个数组，然后通过系统的搜索类来实现，CSSearchableIndex这个来注入数据。然后配置restoreUserActivityState这个方法，可以决定item跳转目标类。</p>
</li>
<li><p>选择头像，这里主要是用了一个工具类，然后通过PHPotoLibrary获取权限，有权限就跳转，没有权限申请，有权限跳转到自定义的ImagePickerSheetController，然后会present这个类。</p>
</li>
<li><p>wiki-Face，其实是显示一个网络图片的工具类。当我们编辑框结束，点击return后，这里利用WikiFace静态方法去加载网络接口，然后给图片的image设置进去。</p>
</li>
</ul>

            </div>
            <hr />

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">写作不易，客官能否打赏一杯奶茶？</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            

            <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    <div class="social-share" data-disabled="qzone" data-wechat-qrcode-helper="<p>微信里点“发现”->“扫一扫”二维码便可查看分享。</p>"></div>
    
</div>

<script src="/libs/share/js/social-share.min.js"></script>

            

    <div class="reprint" id="reprint-statement">
        <p class="reprint-tip">
            <i class="fa fa-exclamation-triangle"></i>&nbsp;&nbsp;
            <span>转载规则</span>
        </p>
        
            <div class="center-align">
                <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                    <img alt=""
                         style="border-width:0"
                         src="https://i.creativecommons.org/l/by/4.0/88x31.png"/>
                </a>
            </div>
            <br/>
            <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text"
                  property="dct:title" rel="dct:type">
                    《iOS swift 3天30个swift项目之第三天》
                </span> 由
            <a xmlns:cc="http://creativecommons.org/ns#" href="/2023/02/05/iOS-swift-3%E5%A4%A930%E4%B8%AAswift%E9%A1%B9%E7%9B%AE%E4%B9%8B%E7%AC%AC%E4%B8%89%E5%A4%A9/" property="cc:attributionName"
               rel="cc:attributionURL">
                Jason
            </a> 采用
            <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by/4.0/deed.zh">
                知识共享署名 4.0 国际许可协议
            </a>进行许可。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>


        </div>
    </div>

    
    <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: 'fe0ccf043e8b41eb62ea',
        clientSecret: '9ca1dd3be79bdf6123d4aa8ca81753570fe870e1',
        repo: 'jasontojan.github.io',
        owner: 'jasontojan',
        admin: "jasontojan",
        id: '2023/02/05/iOS-swift-3天30个swift项目之第三天/',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    
    <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments input[type=text],
    #vcomments input[type=email],
    #vcomments input[type=url],
    #vcomments textarea {
        box-sizing: border-box;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #42b983;
        font-weight: 500;
        text-decoration: underline;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div id="vcomments" class="card-content"></div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<!-- <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script> -->

<script>
    new Valine({
        el: '#vcomments',
        appId: '查教程获取',
        appKey: '查教程获取',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'false' === 'true',
        avatar: 'wavatar',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '如果你没有GitHub账号，还可以在这里评论啦！'
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2023/02/06/iOS-swift-Gitee%E5%AE%A2%E6%88%B7%E7%AB%AF-%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E5%88%86%E6%9E%90%E4%B9%8B%E4%B8%80/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="iOS swift Gitee客户端 完整项目分析之一">
                        
                        <span class="card-title">iOS swift Gitee客户端 完整项目分析之一</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            1 项目地址
https://gitee.com/open-gitee/gitee_iosGitee基于SwiftUI和OpenApi的iOS客户端项目。

2 项目截图


















3 首页相关这里是底部3个Tab
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2023-02-06
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/iOS/" class="post-category" target="_blank">
                                    iOS
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE-SwiftUI/" target="_blank">
                        <span class="chip bg-color">完整项目 SwiftUI</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fa fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/02/04/iOS-swift-3%E5%A4%A930%E4%B8%AAswift%E9%A1%B9%E7%9B%AE%E4%B9%8B%E7%AC%AC%E4%BA%8C%E5%A4%A9/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/3.jpg" class="responsive-img" alt="iOS swift 3天30个swift项目之第二天">
                        
                        <span class="card-title">iOS swift 3天30个swift项目之第二天</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            1 渐变TableView1.1 效果

1.2 代码实现直接是继承了UITableViewController这个控制器，这个应该是自带了一个列表。内部有一个tableView。
class ClearTableViewControlle
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2023-02-04
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/iOS/" class="post-category" target="_blank">
                                    iOS
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/30%E4%B8%AASwift%E9%A1%B9%E7%9B%AE/" target="_blank">
                        <span class="chip bg-color">30个Swift项目</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: JasonToJan's Blog<br />'
            + '作者: Jason<br />'
            + '链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () { bodyElement.removeChild(newdiv); }, 200);
    });
</script>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="fa fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fa fa-list"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            // headingsOffset: -205,
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).slideUp(500);
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).slideDown(500);
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>
    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>

<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>
<!-- 代码语言 -->
<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>
<!-- 代码块复制 -->
<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>
<script type="text/javascript" src="/libs/codeBlock/clipboard.min.js"></script>
<!-- 代码块收缩 -->
<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script> 
<!-- 代码块折行 -->
<style type="text/css">code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }</style>


    <footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            &copy; 2023-2023 JasonJan. 版权所有

            
            &nbsp;<i class="fa fa-area-chart"></i>&nbsp;站点总字数:&nbsp;
            <span class="white-color">274.7k</span>
            

            <br>
            <span id="sitetime"></span>

            
            
            <br>
            
            <span id="busuanzi_container_site_pv" style='display:none'>
                <i class="fa fa-heart-o"></i>
                本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
            <span id="busuanzi_container_site_uv" style='display:none'>
                人次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
            </span>
            
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/JasonToJan" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:jason1211241203@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="https://zhihu.com/people/JasonJan" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-inverse">知</i>
    </a>



    <a href="http://wpa.qq.com/msgrd?v=3&uin=1211241203&site=qq&menu=yes" class="tooltipped" target="_blank" data-tooltip="访问我的知乎" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>



    <a href="https://weibo.com/JasonJan" class="tooltipped" target="_blank" data-tooltip="关注我的微博" data-position="top" data-delay="50">
        <i class="fa fa-weibo"></i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fa fa-rss"></i>
    </a>
</div>
    </div>
</footer>

<div class="progress-bar"></div>

<!-- 不蒜子计数初始值纠正 -->
<script>
    $(document).ready(function () {

        var int = setInterval(fixCount, 50);
        var pvcountOffset = 80000;
        var uvcountOffset = 20000;

        function fixCount() {
            if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
                $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset);
                clearInterval(int);
            }
            if ($("#busuanzi_container_site_pv").css("display") != "none") {
                $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据 
                clearInterval(int);
            }
        }
    });
</script>

<script language=javascript>
    function siteTime() {
        window.setTimeout("siteTime()", 1000);
        var seconds = 1000;
        var minutes = seconds * 60;
        var hours = minutes * 60;
        var days = hours * 24;
        var years = days * 365;
        var today = new Date();
        var todayYear = today.getFullYear();
        var todayMonth = today.getMonth() + 1;
        var todayDate = today.getDate();
        var todayHour = today.getHours();
        var todayMinute = today.getMinutes();
        var todaySecond = today.getSeconds();
        /* Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)
        year - 作为date对象的年份，为4位年份值
        month - 0-11之间的整数，做为date对象的月份
        day - 1-31之间的整数，做为date对象的天数
        hours - 0(午夜24点)-23之间的整数，做为date对象的小时数
        minutes - 0-59之间的整数，做为date对象的分钟数
        seconds - 0-59之间的整数，做为date对象的秒数
        microseconds - 0-999之间的整数，做为date对象的毫秒数 */
        var t1 = Date.UTC(2017, 09, 11, 00, 00, 00); //北京时间2018-2-13 00:00:00
        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
        var diff = t2 - t1;
        var diffYears = Math.floor(diff / years);
        var diffDays = Math.floor((diff / days) - diffYears * 365);
        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);
        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);
        document.getElementById("sitetime").innerHTML = "本站已运行 " + diffYears + " 年 " + diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
    }/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/
    siteTime();
</script>

<link rel="stylesheet" href="/css/prism.css">
<script src="/js/prism.js" async></script>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <script type="text/javascript"> var OriginTitile = document.title, st; document.addEventListener("visibilitychange", function () { document.hidden ? (document.title = "Σ(っ °Д °;)っ喔哟，崩溃啦！", clearTimeout(st)) : (document.title = "φ(゜▽゜*)♪咦，又好了！", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) })
    </script>

    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=查教程获取"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '查教程获取');
</script>



    
    <script src="/libs/others/clicklove.js"></script>
    

    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    <!-- 雪花特效 -->
    

</body>

</html>